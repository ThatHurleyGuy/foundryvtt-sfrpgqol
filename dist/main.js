!function(t){var e={};function a(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e),a.d(e,"doRoll",(function(){return c}));function n(...t){console.log("Starfinder Qol | ",...t)}class o{constructor(t,e,a,n){this.actionName=t,this.message=e,this.intendedFor=a,this.data=n}}class r{constructor(t){this.callback=t,this.socket=game.socket,this.socket.on("module.starfinderqol",e=>{n("Processing socket message"),t(e)})}broadcastData(t){game.user.id!==t.intendedFor?this.socket.emit("module.starfinderqol",t):this.callback(t)}}const s=async t=>{switch(t.actionName){case"action_name":if(!game.user.isGM)break;await(async t=>{n("Handling damage");const e=canvas.tokens.get(t.data.targetId);await e.actor.update({"data.attributes.hp.value":e.actor.data.data.attributes.hp.value-t.data.totalDamage})})(t)}};let i;async function c(t,e){const a=ChatMessage.getSpeaker(),n=canvas.tokens.get(a.token),r=n?n.actor:game.actors.get(a.actor);game.user.targets.forEach(async a=>{const n=game.users.entities.find(t=>t.isGM&&t.active),s={targetId:a.data._id,totalDamage:9},c=new o("action_name",n.id,"foobarbazmessage",s);i.broadcastData(c);const d=a.actor,l=r.items.find(t=>t.name===e),u=d.data.data.attributes;await l.rollAttack({event:t}),(async(t,e)=>{const a=await renderTemplate("modules/starfinderqol/public/templates/hits.html",t),n={user:game.user._id,speaker:{actor:e,alias:null==e?void 0:e.name},content:a};ChatMessage.create(n)})({targetAttributes:u,damageAppliedString:"Nailed it."},d)})}Hooks.once("init",async()=>{n("Initializing starfinder-qol"),window.StarfinderQOL={doRoll:c}}),Hooks.once("ready",async()=>{i=new r(s)}),Hooks.on("hotbarDrop",(t,e,a)=>(n("Handling hotbarDrop"),(async(t,e)=>{const a=`StarfinderQOL.doRoll(event, "${t.name}")`,n=await Macro.create({name:`${t.name} - ${t.type}`,type:"script",img:t.img,command:a,flags:{"starfinderqol.itemMacro":!0}});await game.user.assignHotbarMacro(n,e)})(e.data,a),!1))}]);